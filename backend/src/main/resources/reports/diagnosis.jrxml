<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="DiagnosticoMateco" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="a1b2c3d4-e5f6-g7h8-i9j0-k1l2m3n4o5p6">

    <field name="name" class="java.lang.String"/>
    <field name="ipmScore" class="java.lang.Double"/>
    <field name="icpPrevious" class="java.lang.Double"/>
    <field name="punishmentScore" class="java.lang.Double"/>
    <field name="correctAnswers" class="java.lang.Integer"/>
    <field name="totalQuestions" class="java.lang.Integer"/>
    <field name="easyMissedQuestions" class="java.util.List"/>
    <field name="hardMissedQuestions" class="java.util.List"/>
    <field name="subjectsToReview" class="java.util.List"/>

    <background>
        <band splitType="Stretch"/>
    </background>

    <title>
        <band height="110" splitType="Stretch">
            <rectangle>
                <reportElement x="0" y="0" width="555" height="90" backcolor="#F8F8F8" uuid="8827e69d"/>
                <graphicElement>
                    <pen lineWidth="0.0"/>
                </graphicElement>
            </rectangle>
            <staticText>
                <reportElement x="20" y="15" width="300" height="25" forecolor="#333333" uuid="7d1a2b3c">
                    <property name="com.jaspersoft.studio.unit.height" value="px"/>
                </reportElement>
                <textElement verticalAlignment="Middle">
                    <font size="18" isBold="true"/>
                </textElement>
                <text><![CDATA[DIAGNÓSTICO DO SIMULADO]]></text>
            </staticText>
            <textField>
                <reportElement x="20" y="45" width="380" height="30" forecolor="#0056B3" uuid="9e8f7g6h"/>
                <textElement verticalAlignment="Top">
                    <font size="16" isBold="true"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{name}.toUpperCase()]]></textFieldExpression>
            </textField>
            <staticText>
                <reportElement x="410" y="15" width="125" height="20" forecolor="#666666" uuid="1a2b3c4d"/>
                <textElement textAlignment="Right">
                    <font size="10" isBold="true"/>
                </textElement>
                <text><![CDATA[MATECO - 2025]]></text>
            </staticText>
        </band>
    </title>

    <detail>
        <band height="320" splitType="Stretch">
            <staticText>
                <reportElement x="0" y="0" width="555" height="25" uuid="2a3b4c5d"/>
                <textElement textAlignment="Center">
                    <font size="12" isBold="true"/>
                </textElement>
                <text><![CDATA[ÍNDICE DE PERFORMANCE MATECO (IPM)]]></text>
            </staticText>

            <frame>
                <reportElement x="80" y="220" width="400" height="80" uuid="4a5b6c7d"/>
                <box>
                    <pen lineWidth="0.5" lineColor="#CCCCCC"/>
                </box>
                <staticText>
                    <reportElement x="10" y="10" width="100" height="20" uuid="5a6b7c8d"/>
                    <textElement><font isBold="true"/> </textElement>
                    <text><![CDATA[Acertos:]]></text>
                </staticText>
                <textField>
                    <reportElement x="110" y="10" width="80" height="20" uuid="6a7b8c9d"/>
                    <textFieldExpression><![CDATA[$F{correctAnswers} + " / " + $F{totalQuestions}]]></textFieldExpression>
                </textField>
                <staticText>
                    <reportElement x="10" y="40" width="100" height="20" uuid="7a8b9c0d"/>
                    <textElement><font isBold="true"/> </textElement>
                    <text><![CDATA[ICP Prévio:]]></text>
                </staticText>
                <textField>
                    <reportElement x="110" y="40" width="80" height="20" uuid="8a9b0c1d"/>
                    <textFieldExpression><![CDATA[$F{icpPrevious}.intValue() + "%"]]></textFieldExpression>
                </textField>
                <staticText>
                    <reportElement x="210" y="40" width="100" height="20" uuid="9a0b1c2d"/>
                    <textElement><font isBold="true"/> </textElement>
                    <text><![CDATA[Punição:]]></text>
                </staticText>
                <textField>
                    <reportElement x="310" y="40" width="80" height="20" uuid="0a1b2c3d"/>
                    <textFieldExpression><![CDATA[$F{punishmentScore}.intValue() + "%"]]></textFieldExpression>
                </textField>
            </frame>
        </band>
    </detail>

    <summary>
        <band height="200" splitType="Stretch">
            <staticText>
                <reportElement x="0" y="10" width="555" height="20" uuid="b1c2d3e4"/>
                <textElement><font size="12" isBold="true"/> </textElement>
                <text><![CDATA[ESTRATÉGIA DE REVISÃO (TOP 3 PRIORIDADES)]]></text>
            </staticText>
            <textField textAdjust="StretchHeight">
                <reportElement x="0" y="35" width="555" height="40" forecolor="#CC0000" uuid="c2d3e4f5"/>
                <textElement>
                    <font size="11" isItalic="true"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{subjectsToReview}.isEmpty() ? "Nenhuma revisão prioritária identificada." : String.join(", ", $F{subjectsToReview})]]></textFieldExpression>
            </textField>
        </band>
    </summary>
</jasperReport>