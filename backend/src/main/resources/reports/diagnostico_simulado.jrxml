<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
              xmlns="http://jasperreports.sourceforge.net/jasperreports"
              xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports
              http://jasperreports.sourceforge.net/xsd/jasperreport.xsd"
              name="diagnostico_simulado"
              pageWidth="595" pageHeight="842"
              columnWidth="540"
              leftMargin="35"
              rightMargin="20"
              topMargin="45" bottomMargin="20">

    <parameter name="LOGO_MATECO" class="java.io.InputStream"/>
    <parameter name="studentName" class="java.lang.String"/>
    <parameter name="examName" class="java.lang.String"/>
    <parameter name="examYear" class="java.lang.String"/>

    <parameter name="GRAFICO_IPM" class="java.awt.Image"/>
    <parameter name="VALOR_IPM" class="java.lang.Number"/>
    <parameter name="correctAnswers" class="java.lang.Integer"/>

    <parameter name="NAO_DEVERIA_ERRAR" class="java.io.InputStream"/>
    <parameter name="ERROU_MAS_TA_OK" class="java.io.InputStream"/>

    <parameter name="naoDeviaErrar" class="java.lang.String"/>
    <parameter name="errouMasTaOk" class="java.lang.String"/>

    <parameter name="TOP_5_ASSUNTOS" class="java.io.InputStream"/>
    <parameter name="TOP5_SUBREPORT" class="net.sf.jasperreports.engine.JasperReport"/>
    <parameter name="TOP5_DATASOURCE" class="net.sf.jasperreports.engine.data.JRBeanCollectionDataSource"/>

    <parameter name="VISAO_POR_AREA" class="java.io.InputStream"/>
    <parameter name="VISAO_POR_AREA_TEXT" class="java.lang.String"/>

    <parameter name="DISTRIBUICAO" class="java.io.InputStream"/>
    <parameter name="DISTRIBUICAO_TEXT" class="java.lang.String"/>

    <parameter name="O_QUE_REVISAR" class="java.io.InputStream"/>
    <parameter name="REVISAR_1" class="java.lang.String"/>
    <parameter name="REVISAR_2" class="java.lang.String"/>
    <parameter name="REVISAR_3" class="java.lang.String"/>

    <field name="id" class="java.lang.Integer"/>
    <field name="level" class="java.lang.String"/>
    <field name="officialAnswer" class="java.lang.String"/>
    <field name="studentAnswer" class="java.lang.String"/>
    <field name="status" class="java.lang.String"/>
    <field name="subject" class="java.lang.String"/>

    <background>
        <band height="777">
            <textField>
                <reportElement x="385" y="5" width="140" height="48" forecolor="#CC0000"/>
                <box topPadding="0" leftPadding="2" bottomPadding="0" rightPadding="2">
                    <pen lineWidth="1.0" lineColor="#000000"/>
                </box>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font fontName="RedHatDisplay" size="13" isBold="true"/>
                </textElement>
                <textFieldExpression>
                    <![CDATA["VOCÊ ACERTOU\n" + $P{correctAnswers} + " QUESTÕES"]]></textFieldExpression>
            </textField>

            <staticText>
                <reportElement x="385" y="58" width="140" height="25"/>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font fontName="RedHatDisplay" size="10" isBold="true"/>
                </textElement>
                <text><![CDATA[ÍNDICE DE PONTUAÇÃO
MATECO (IPM)]]></text>
            </staticText>

            <image scaleImage="RetainShape" hAlign="Center" vAlign="Middle">
                <reportElement x="405" y="83" width="100" height="55"/>
                <imageExpression><![CDATA[$P{GRAFICO_IPM}]]></imageExpression>
            </image>

            <textField>
                <reportElement x="385" y="113" width="140" height="25" forecolor="#CC0000"/>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font fontName="RedHatDisplay" size="10" isBold="true"/>
                </textElement>
                <textFieldExpression><![CDATA[$P{VALOR_IPM}]]></textFieldExpression>
            </textField>

            <image scaleImage="RetainShape" hAlign="Left" vAlign="Middle">
                <reportElement x="385" y="148" width="18" height="18"/>
                <imageExpression><![CDATA[$P{NAO_DEVERIA_ERRAR}]]></imageExpression>
            </image>
            <staticText>
                <reportElement x="407" y="148" width="118" height="18" forecolor="#CC0000"/>
                <textElement textAlignment="Left" verticalAlignment="Middle">
                    <font fontName="RedHatDisplay" size="10" isBold="true"/>
                </textElement>
                <text><![CDATA[NÃO DEVIA ERRAR]]></text>
            </staticText>
            <textField isStretchWithOverflow="true">
                <reportElement x="385" y="168" width="140" height="50" forecolor="#000000"/>
                <box padding="8">
                    <pen lineWidth="2.0" lineColor="#000000"/>
                </box>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font fontName="RedHatDisplay" size="9" isBold="true"/>
                </textElement>
                <textFieldExpression><![CDATA[$P{naoDeviaErrar}]]></textFieldExpression>
            </textField>

            <image scaleImage="RetainShape" hAlign="Left" vAlign="Middle">
                <reportElement x="385" y="228" width="18" height="18"/>
                <imageExpression><![CDATA[$P{ERROU_MAS_TA_OK}]]></imageExpression>
            </image>
            <staticText>
                <reportElement x="407" y="228" width="118" height="18" forecolor="#CC0000"/>
                <textElement textAlignment="Left" verticalAlignment="Middle">
                    <font fontName="RedHatDisplay" size="10" isBold="true"/>
                </textElement>
                <text><![CDATA[ERROU, MAS TÁ OK]]></text>
            </staticText>
            <textField isStretchWithOverflow="true">
                <reportElement x="385" y="248" width="140" height="45" forecolor="#000000"/>
                <box padding="8">
                    <pen lineWidth="2.0" lineColor="#000000"/>
                </box>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font fontName="RedHatDisplay" size="9" isBold="true"/>
                </textElement>
                <textFieldExpression><![CDATA[$P{errouMasTaOk}]]></textFieldExpression>
            </textField>

            <image scaleImage="RetainShape" hAlign="Left" vAlign="Middle">
                <reportElement x="385" y="303" width="20" height="20"/>
                <imageExpression><![CDATA[$P{TOP_5_ASSUNTOS}]]></imageExpression>
            </image>
            <staticText>
                <reportElement x="410" y="303" width="115" height="20" forecolor="#CC0000"/>
                <textElement textAlignment="Left" verticalAlignment="Middle">
                    <font fontName="RedHatDisplay" size="10" isBold="true"/>
                </textElement>
                <text><![CDATA[TOP 5 ASSUNTOS]]></text>
            </staticText>

            <subreport>
                <reportElement x="385" y="328" width="140" height="190"/>
                <dataSourceExpression><![CDATA[$P{TOP5_DATASOURCE}]]></dataSourceExpression>
                <subreportExpression><![CDATA[$P{TOP5_SUBREPORT}]]></subreportExpression>
            </subreport>

            <frame>
                <reportElement x="385" y="528" width="140" height="70"/>
                <image scaleImage="RetainShape" hAlign="Left" vAlign="Middle">
                    <reportElement x="0" y="0" width="18" height="18"/>
                    <imageExpression><![CDATA[$P{VISAO_POR_AREA}]]></imageExpression>
                </image>
                <staticText>
                    <reportElement x="22" y="0" width="118" height="18" forecolor="#CC0000"/>
                    <textElement verticalAlignment="Middle">
                        <font fontName="RedHatDisplay" size="10" isBold="true"/>
                    </textElement>
                    <text><![CDATA[VISÃO POR ÁREA]]></text>
                </staticText>
                <textField isStretchWithOverflow="true">
                    <reportElement x="0" y="20" width="140" height="50" forecolor="#000000"/>
                    <textElement>
                        <font fontName="RedHatDisplay" size="9" isBold="true"/>
                        <paragraph lineSpacing="1_1_2"/>
                    </textElement>
                    <textFieldExpression><![CDATA[$P{VISAO_POR_AREA_TEXT}]]></textFieldExpression>
                </textField>
            </frame>

            <frame>
                <reportElement x="385" y="605" width="140" height="70"/>
                <image scaleImage="RetainShape" hAlign="Left" vAlign="Middle">
                    <reportElement x="0" y="0" width="18" height="18"/>
                    <imageExpression><![CDATA[$P{DISTRIBUICAO}]]></imageExpression>
                </image>
                <staticText>
                    <reportElement x="22" y="0" width="118" height="18" forecolor="#CC0000"/>
                    <textElement verticalAlignment="Middle">
                        <font fontName="RedHatDisplay" size="10" isBold="true"/>
                    </textElement>
                    <text><![CDATA[DISTRIBUIÇÃO]]></text>
                </staticText>
                <textField isStretchWithOverflow="true">
                    <reportElement x="0" y="20" width="140" height="50" forecolor="#000000"/>
                    <textElement>
                        <font fontName="RedHatDisplay" size="9" isBold="true"/>
                        <paragraph lineSpacing="1_1_2"/>
                    </textElement>
                    <textFieldExpression><![CDATA[$P{DISTRIBUICAO_TEXT}]]></textFieldExpression>
                </textField>
            </frame>

            <frame>
                <reportElement x="385" y="685" width="140" height="60"/>
                <image scaleImage="RetainShape" hAlign="Left" vAlign="Middle">
                    <reportElement x="0" y="0" width="18" height="18"/>
                    <imageExpression><![CDATA[$P{O_QUE_REVISAR}]]></imageExpression>
                </image>
                <staticText>
                    <reportElement x="22" y="0" width="118" height="18" forecolor="#CC0000"/>
                    <textElement verticalAlignment="Middle">
                        <font fontName="RedHatDisplay" size="10" isBold="true"/>
                    </textElement>
                    <text><![CDATA[O QUE REVISAR?]]></text>
                </staticText>
                <textField isStretchWithOverflow="true">
                    <reportElement x="0" y="20" width="140" height="13" forecolor="#CC0000"/>
                    <textElement>
                        <font fontName="RedHatDisplay" size="9" isBold="true"/>
                    </textElement>
                    <textFieldExpression><![CDATA[$P{REVISAR_1}]]></textFieldExpression>
                </textField>
                <textField isStretchWithOverflow="true">
                    <reportElement x="0" y="33" width="140" height="13" forecolor="#000000"/>
                    <textElement>
                        <font fontName="RedHatDisplay" size="9" isBold="true"/>
                    </textElement>
                    <textFieldExpression><![CDATA[$P{REVISAR_2}]]></textFieldExpression>
                </textField>
                <textField isStretchWithOverflow="true">
                    <reportElement x="0" y="46" width="140" height="13" forecolor="#3993B0"/>
                    <textElement>
                        <font fontName="RedHatDisplay" size="9" isBold="true"/>
                    </textElement>
                    <textFieldExpression><![CDATA[$P{REVISAR_3}]]></textFieldExpression>
                </textField>
            </frame>
        </band>
    </background>

    <title>
        <band height="50">
            <image scaleImage="RetainShape">
                <reportElement x="0" y="0" width="60" height="45"/>
                <imageExpression><![CDATA[$P{LOGO_MATECO}]]></imageExpression>
            </image>

            <staticText>
                <reportElement x="65" y="5" width="300" height="18"/>
                <textElement>
                    <font fontName="RedHatDisplay" size="10" isBold="true"/>
                </textElement>
                <text><![CDATA[DIAGNÓSTICO DO SIMULADO]]></text>
            </staticText>

            <textField>
                <reportElement x="65" y="23" width="300" height="12"/>
                <textElement>
                    <font fontName="RedHatDisplay" size="9" isBold="true"/>
                </textElement>
                <textFieldExpression><![CDATA[$P{examName} + " - " + $P{examYear}]]></textFieldExpression>
            </textField>

            <textField>
                <reportElement x="65" y="35" width="300" height="12" forecolor="#CC0000"/>
                <textElement>
                    <font fontName="RedHatDisplay" size="9" isBold="true"/>
                </textElement>
                <textFieldExpression><![CDATA[$P{studentName}]]></textFieldExpression>
            </textField>
        </band>
    </title>

    <columnHeader>
        <band height="28">
            <staticText>
                <reportElement x="0" y="0" width="25" height="28"
                               forecolor="#FFFFFF" backcolor="#409ab2" mode="Opaque"/>
                <box leftPadding="3" rightPadding="3">
                    <topPen lineWidth="1.0" lineColor="#000000"/>
                    <leftPen lineWidth="1.0" lineColor="#000000"/>
                    <bottomPen lineWidth="0.5" lineColor="#000000"/>
                </box>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font fontName="RedHatDisplay" size="8" isBold="true"/>
                </textElement>
                <text><![CDATA[ID]]></text>
            </staticText>

            <staticText>
                <reportElement x="25" y="0" width="40" height="28"
                               forecolor="#FFFFFF" backcolor="#409ab2" mode="Opaque"/>
                <box leftPadding="3" rightPadding="3">
                    <topPen lineWidth="1.0" lineColor="#000000"/>
                    <leftPen lineWidth="0.5" lineColor="#000000"/>
                    <bottomPen lineWidth="0.5" lineColor="#000000"/>
                </box>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font fontName="RedHatDisplay" size="8" isBold="true"/>
                </textElement>
                <text><![CDATA[NÍVEL]]></text>
            </staticText>

            <staticText>
                <reportElement x="65" y="0" width="55" height="28"
                               forecolor="#FFFFFF" backcolor="#409ab2" mode="Opaque"/>
                <box leftPadding="3" rightPadding="3">
                    <topPen lineWidth="1.0" lineColor="#000000"/>
                    <leftPen lineWidth="0.5" lineColor="#000000"/>
                    <bottomPen lineWidth="0.5" lineColor="#000000"/>
                </box>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font fontName="RedHatDisplay" size="8" isBold="true"/>
                </textElement>
                <text><![CDATA[GABARITO OFICIAL]]></text>
            </staticText>

            <staticText>
                <reportElement x="120" y="0" width="55" height="28"
                               forecolor="#FFFFFF" backcolor="#409ab2" mode="Opaque"/>
                <box leftPadding="3" rightPadding="3">
                    <topPen lineWidth="1.0" lineColor="#000000"/>
                    <leftPen lineWidth="0.5" lineColor="#000000"/>
                    <bottomPen lineWidth="0.5" lineColor="#000000"/>
                </box>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font fontName="RedHatDisplay" size="8" isBold="true"/>
                </textElement>
                <text><![CDATA[SUAS RESPOSTAS]]></text>
            </staticText>

            <staticText>
                <reportElement x="175" y="0" width="50" height="28"
                               forecolor="#FFFFFF" backcolor="#409ab2" mode="Opaque"/>
                <box leftPadding="3" rightPadding="3">
                    <topPen lineWidth="1.0" lineColor="#000000"/>
                    <leftPen lineWidth="0.5" lineColor="#000000"/>
                    <bottomPen lineWidth="0.5" lineColor="#000000"/>
                </box>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font fontName="RedHatDisplay" size="8" isBold="true"/>
                </textElement>
                <text><![CDATA[ACERTOU?]]></text>
            </staticText>

            <staticText>
                <reportElement x="225" y="0" width="145" height="28"
                               forecolor="#FFFFFF" backcolor="#409ab2" mode="Opaque"/>
                <box leftPadding="5" rightPadding="3">
                    <topPen lineWidth="1.0" lineColor="#000000"/>
                    <leftPen lineWidth="0.5" lineColor="#000000"/>
                    <bottomPen lineWidth="0.5" lineColor="#000000"/>
                    <rightPen lineWidth="1.0" lineColor="#000000"/>
                </box>
                <textElement textAlignment="Left" verticalAlignment="Middle">
                    <font fontName="RedHatDisplay" size="8" isBold="true"/>
                </textElement>
                <text><![CDATA[CONTEÚDO]]></text>
            </staticText>
        </band>
    </columnHeader>

    <detail>
        <band height="15">
            <textField>
                <reportElement x="0" y="0" width="25" height="15"/>
                <box leftPadding="3" rightPadding="3">
                    <leftPen lineWidth="1.0" lineColor="#000000"/>
                    <bottomPen lineWidth="0.5" lineColor="#000000"/>
                </box>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font fontName="RedHatDisplay" size="9" isBold="true"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{id}]]></textFieldExpression>
            </textField>

            <textField>
                <reportElement x="25" y="0" width="40" height="15"/>
                <box leftPadding="3" rightPadding="3">
                    <leftPen lineWidth="0.5" lineColor="#000000"/>
                    <bottomPen lineWidth="0.5" lineColor="#000000"/>
                </box>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font fontName="RedHatDisplay" size="9" isBold="true"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{level}]]></textFieldExpression>
            </textField>

            <textField>
                <reportElement x="65" y="0" width="55" height="15"/>
                <box leftPadding="3" rightPadding="3">
                    <leftPen lineWidth="0.5" lineColor="#000000"/>
                    <bottomPen lineWidth="0.5" lineColor="#000000"/>
                </box>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font fontName="RedHatDisplay" size="9" isBold="true"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{officialAnswer}]]></textFieldExpression>
            </textField>

            <textField>
                <reportElement x="120" y="0" width="55" height="15" forecolor="#CC0000" backcolor="#f2f2f2"
                               mode="Opaque"/>
                <box leftPadding="3" rightPadding="3">
                    <leftPen lineWidth="0.5" lineColor="#000000"/>
                    <bottomPen lineWidth="0.5" lineColor="#000000"/>
                </box>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font fontName="RedHatDisplay" size="9" isBold="true"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{studentAnswer}]]></textFieldExpression>
            </textField>

            <textField>
                <reportElement x="175" y="0" width="50" height="15">
                    <propertyExpression name="net.sf.jasperreports.style.forecolor">
                        <![CDATA[$F{status}]]></propertyExpression>
                </reportElement>
                <box>
                    <leftPen lineWidth="0.5" lineColor="#000000"/>
                    <bottomPen lineWidth="0.5" lineColor="#000000"/>
                </box>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font fontName="DejaVu Sans" size="9" isBold="true"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{status}]]></textFieldExpression>
            </textField>

            <textField isStretchWithOverflow="true">
                <reportElement x="225" y="0" width="145" height="15"/>
                <box leftPadding="5" rightPadding="3">
                    <leftPen lineWidth="0.5" lineColor="#000000"/>
                    <bottomPen lineWidth="0.5" lineColor="#000000"/>
                    <rightPen lineWidth="1.0" lineColor="#000000"/>
                </box>
                <textElement textAlignment="Left" verticalAlignment="Middle">
                    <font fontName="RedHatDisplay" size="9" isBold="true"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{subject}]]></textFieldExpression>
            </textField>
        </band>
    </detail>
</jasperReport>